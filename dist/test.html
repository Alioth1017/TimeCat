<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeCat</title>
    <style>
        label {
            margin-left: 10px;
        }
    </style>
</head>

<body>
    <div id="test-app">
        <section>
            <button @click="plus">plus</button>
            <button @click="shuffle">shuffle</button>
            <button @click="move1">move1</button>
            <button @click="move2">move2</button>
        </section>

        <ul>
            <li :key="item.id" v-for="item in list">
                <span v-text="item.value"></span>
            </li>
        </ul>
    </div>

    <button id="replay">Replay</button>


    <script src="https://cdn.bootcss.com/vue/2.6.11/vue.min.js"></script>

    <script>
        var app = new Vue({
            data: {
                list: [
                    { id: 1, value: 1 },
                    { id: 2, value: 2 },
                    { id: 3, value: 3 },
                    { id: 4, value: 4 },
                    { id: 5, value: 5 }
                ],
            },
            methods: {
                plus() {
                    this.list = this.list.map(item => { item.value += 1; return item })
                },
                shuffle() {
                    const newList = []

                    while (this.list.length) {
                        const i = Math.floor(Math.random() * this.list.length)
                        newList.push(...this.list.splice(i, 1))
                    }

                    this.list = newList
                },
                move1() {
                    const ul = document.querySelector('ul')
                    const liList = ul.querySelectorAll('li')
                    const child1 = document.createElement('child-1')
                    child1.appendChild(document.createComment('i am a comment'))
                    liList[0].appendChild(child1)
                    const child2 = document.createElement('child-2')
                    child2.innerText = 'child-content-2'
                    child1.appendChild(child2)
                    liList[4].insertBefore(child2, liList[4].lastChild)
                    child1.removeChild(child1.firstChild)

                },
                move2() {

                },
            }
        })
        // mount
        app.$mount('#test-app')
    </script>

    <script src="http://localhost:4321/timecatjs.min.js"></script>
    <script>
        const { record } = timecat
        ctrl = record({
            audio: true
        })
        const replayButton = document.getElementById('replay')
        if (replayButton) {
            replayButton.onclick = () => {
                ctrl.unsubscribe()
                window.open('replay.html')
            }
        }
    </script>

</body>

</html>
